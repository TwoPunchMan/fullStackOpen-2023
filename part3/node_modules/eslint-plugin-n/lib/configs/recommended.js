"use strict"

const getPackageJson = require("eslint-plugin-n/lib/util/get-package-json")
const moduleConfig = require("eslint-plugin-n/lib/configs/recommended-module")
const scriptConfig = require("eslint-plugin-n/lib/configs/recommended-script")

module.exports = () => {
    const packageJson = getPackageJson()
    const isModule = (packageJson && packageJson.type) === "module"

    return {
        ...(isModule ? moduleConfig : scriptConfig),
        overrides: [
            { files: ["*.cjs", ".*.cjs"], ...scriptConfig },
            { files: ["*.mjs", ".*.mjs"], ...moduleConfig },
        ],
    }
}
